"use strict";(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[845],{6845:(z,h,a)=>{a.r(h),a.d(h,{AuthModule:()=>T});var r=a(6997),P=a(6366),l=a(4006),d=a(9697),e=a(2963);let M=(()=>{class n{constructor(t,o,s){this.toast=t,this.router=o,this.route=s}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.quB),e.Y36(d.F0),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-auth"]],decls:3,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"nb-layout")(1,"nb-layout-column"),e._UZ(2,"router-outlet"),e.qZA()())},dependencies:[d.lC,r.Aqw,r.dP_],styles:["[_nghost-%COMP%]{margin:auto}[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1rem}"]}),n})();var y=a(9671),p=a(2340),g=a(743),m=a(4276),f=a(529);let b=(()=>{class n extends m.UP{constructor(t){super({apiUrl:p.N.url_api,entity:"auth/login"},t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k=(()=>{class n extends m.UP{constructor(t){super({apiUrl:p.N.url_api,entity:"sys/user"},t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x=(()=>{class n extends m.UP{constructor(t){super({apiUrl:p.N.url_api,entity:"auth/capabilities"},t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_=(()=>{class n extends m.UP{constructor(t){super({apiUrl:p.N.url_api,entity:"auth/refreshtoken"},t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=a(6895);function O(n,i){1&n&&(e.TgZ(0,"section",15)(1,"span",16),e._uU(2,"\u0110ang \u0111\u0103ng nh\u1eadp..."),e.qZA(),e._UZ(3,"span",17),e.qZA())}const S=[{path:"",component:M,children:[{path:"login",component:(()=>{class n{constructor(t,o,s,c,u,A,U){this.loginService=t,this.userService=o,this.capabilitiesService=s,this.refreshTokenService=c,this.toast=u,this.router=A,this.route=U,this.isLoging=!1,this.isLoading=!0}ngOnInit(){this.checkToken()}checkToken(){var t=this;return(0,y.Z)(function*(){try{(yield t.refreshTokenService.getOne("").toPromise())&&t.router.navigateByUrl("pages")}catch{t.isLoading=!1}})()}login(){var t=this;return(0,y.Z)(function*(){t.isLoging=!0,localStorage.setItem(g.$.user_login,t.username);try{if(t.isValid()){const o=yield t.loginService.create({username:t.username,password:t.password}).toPromise();if(!o||!o.userId)throw new Error("Sai t\xe0i kho\u1ea3n ho\u1eb7c m\u1eadt kh\u1ea9u");{localStorage.setItem(g.$.accessToken,o.accessToken),t.userService.getOne(o.userId).toPromise();const s=yield t.capabilitiesService.getOne("").toPromise();if(s&&s.length>0){let c=!1;for(let u=0;u<s.length;u++)s[u]==p.N.app_id&&(c=!0);if(c){localStorage.setItem(g.$.accessToken,o.accessToken),localStorage.setItem(g.$.userId,o.userId),localStorage.setItem(g.$.displayName,o.displayName),localStorage.setItem(g.$.roleId,o.roleId);const u=localStorage.getItem("redirectUrl");u?(localStorage.removeItem("redirectUrl"),t.router.navigateByUrl(u)):t.router.navigateByUrl("pages/icon")}else t.toast.danger("Kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp \u1ee9ng d\u1ee5ng")}else t.toast.danger("Kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp \u1ee9ng d\u1ee5ng")}}}catch(o){t.toast.danger(o.error?.message?o.error.message:o),t.isLoading=!1}finally{t.isLoging=!1,t.isLoading=!1}})()}isValid(){return!(!this.username||!this.password)||(this.toast.danger("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin"),!1)}forgetPass(){this.toast.warning("Ch\u1ee9c n\u0103ng ch\u01b0a kh\u1ea3 d\u1ee5ng, vui l\xf2ng li\xean h\u1ec7 qu\u1ea3n tr\u1ecb vi\xean")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b),e.Y36(k),e.Y36(x),e.Y36(_),e.Y36(r.quB),e.Y36(d.F0),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-login"]],decls:22,vars:4,consts:[[1,"main",3,"keyup.enter","keydown.enter"],[1,"body"],[1,"kotakForm"],[1,"kotakLogin"],[1,"headerLogin"],[1,"row","align-items-center"],[1,"col-md-12"],["action",""],["type","text","placeholder","User name","name","User name","required","",1,"userName","inputText",3,"ngModel","ngModelChange"],[1,"fa-solid","fa-user","ml-2","icon-user"],["type","password","placeholder","Password","name","Password","required","",1,"userPass","inputText",3,"ngModel","ngModelChange"],[1,"fa-solid","fa-lock","ml-2","icon-pass"],["type","submit","name","","id","submitBtn","value","Enter",3,"nbSpinner","click"],["id","lupaPass","href","#resetPass",1,"mt-3","reset-pass",3,"click"],["class","loading",4,"ngIf"],[1,"loading"],[1,"loadWords"],[1,"loading__anim"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("keyup.enter",function(){return o.login()})("keydown.enter",function(){return o.login()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1"),e._uU(8,"\u0110\u0103ng nh\u1eadp"),e.qZA()(),e.TgZ(9,"div",6)(10,"form",7)(11,"input",8),e.NdJ("ngModelChange",function(c){return o.username=c}),e.qZA(),e._UZ(12,"i",9)(13,"br"),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(c){return o.password=c}),e.qZA(),e._UZ(15,"i",11)(16,"br"),e.TgZ(17,"input",12),e.NdJ("click",function(){return o.isLoading=!0,o.login()}),e.qZA()()(),e.TgZ(18,"div",6)(19,"a",13),e.NdJ("click",function(){return o.forgetPass()}),e._uU(20,"Qu\xean m\u1eadt kh\u1ea9u?"),e.qZA()()()()()()()(),e.YNc(21,O,4,0,"section",14)),2&t&&(e.xp6(11),e.Q6J("ngModel",o.username),e.xp6(3),e.Q6J("ngModel",o.password),e.xp6(3),e.Q6J("nbSpinner",o.isLoging),e.xp6(4),e.Q6J("ngIf",o.isLoading))},dependencies:[v.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,r.Q7R],styles:["[_nghost-%COMP%]{margin:auto}[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1rem}nb-card[_ngcontent-%COMP%]{max-width:40%;margin:10% auto auto}body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh}.loading[_ngcontent-%COMP%]{max-width:50%;line-height:1.4;font-size:1.2rem;font-weight:700;text-align:center;margin:auto}.loadWords[_ngcontent-%COMP%]{font-weight:400;font-size:.9rem;color:#bdbdbd;margin:.6rem 0 2rem;display:block}.loading__anim[_ngcontent-%COMP%]{width:35px;height:35px;border:5px solid rgba(189,189,189,.25);border-left-color:#039be5;border-top-color:#039be5;border-radius:50%;display:inline-block;animation:rotate .6s infinite linear}@keyframes rotate{to{transform:rotate(1turn)}}.main[_ngcontent-%COMP%]{background-position:center center;background-size:cover;height:100vh;left:0;min-height:100vh;min-width:100vw;position:absolute;top:0;width:100vw}.body[_ngcontent-%COMP%]{background-image:url(https://drive.google.com/uc?id=1KutWGG8YVnWIPB7N-fe1YDp9vexuOdWA);background-size:cover;background-repeat:no-repeat;background-position:top;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.headerLogin[_ngcontent-%COMP%]{position:relative;top:50px;left:0%;font-size:20px;color:#2f4f4f;font-family:comic Sans MS}.headerLogin[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.formDiv[_ngcontent-%COMP%]{display:flex;flex-direction:column}.inputText[_ngcontent-%COMP%]{height:40px;width:80%;border:none;outline:none;border-radius:30px;padding:0 0 0 30px;opacity:90%;margin:10px auto}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#313030}i[_ngcontent-%COMP%]{position:relative;top:5px}#submitBtn[_ngcontent-%COMP%]{position:relative;top:10px;height:40px;width:80%;border:none;outline:none;border-radius:30px;font-family:comic Sans MS;color:#fff;background-color:#000;margin:0 5px}#lupaPass[_ngcontent-%COMP%]{position:relative;color:#000;font-size:15px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;left:5px}p[_ngcontent-%COMP%]{position:relative;color:#fff;font-size:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;left:5px}@media only screen and (min-width: 600px){.kotakForm[_ngcontent-%COMP%]{display:flex;position:relative;padding:80px;width:400px;height:450px;background:transparent;justify-content:center;border:2px solid white;border-radius:20px;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.headerLogin[_ngcontent-%COMP%]{position:relative;top:50px;left:0%;font-size:20px;color:#2f4f4f;font-family:comic Sans MS}h1[_ngcontent-%COMP%]{font-family:Plus Jakarta Sans,sans-serif;font-size:2rem}.userName[_ngcontent-%COMP%], .userPass[_ngcontent-%COMP%], #submitBtn[_ngcontent-%COMP%]{font-family:Plus Jakarta Sans,sans-serif;font-size:1rem;width:100%}.reset-pass[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;font-family:Plus Jakarta Sans,sans-serif;font-size:1rem}.icon-pass[_ngcontent-%COMP%]{position:absolute;top:5rem;right:2rem}.icon-user[_ngcontent-%COMP%]{position:absolute;top:1.1rem;right:2rem}}@media screen and (min-device-width: 300px) and (max-device-width: 600px){.kotakForm[_ngcontent-%COMP%]{display:flex;position:relative;padding:80px;width:300px;height:400px;background:transparent;justify-content:center;border:2px solid white;border-radius:20px;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.headerLogin[_ngcontent-%COMP%]{position:relative;top:-3rem;left:0%;font-size:20px;color:#2f4f4f;font-family:comic Sans MS}h1[_ngcontent-%COMP%]{font-family:Plus Jakarta Sans,sans-serif;font-size:1rem}.userName[_ngcontent-%COMP%], .userPass[_ngcontent-%COMP%], #submitBtn[_ngcontent-%COMP%]{font-family:Plus Jakarta Sans,sans-serif;font-size:.7rem;width:100%}.reset-pass[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;font-family:Plus Jakarta Sans,sans-serif;font-size:1rem}.icon-pass[_ngcontent-%COMP%]{position:absolute;top:5rem;right:2rem;display:none}.icon-user[_ngcontent-%COMP%]{position:absolute;top:1.1rem;right:2rem;display:none}}"]}),n})()},{path:"",redirectTo:"login",pathMatch:"full"}]}];let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(S),d.Bz]}),n})();var C=a(8405);let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[r.j5J,r.zyh,r.nKr,C.$,r.KdK,r.T2N,r.EoG,r.CG_,v.ez,l.u5,r.uuI]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[w,P.O,l.u5,r.j5J,r.j7H,L,r.BW0,r.zyh,C.$,r.KdK]}),n})()}}]);